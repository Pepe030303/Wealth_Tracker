# 투자 포트폴리오 관리 시스템

Flask 기반의 투자 포트폴리오 관리 웹 애플리케이션입니다. 실시간 주가 조회, 배당금 관리, 포트폴리오 분석 등의 기능을 제공합니다.

## 주요 기능

### 📊 대시보드
- 포트폴리오 전체 요약 (총 투자금액, 현재 가치, 손익, 수익률)
- 보유 종목 현황 테이블
- 월별 배당금 차트
- 실시간 가격 업데이트

### 📈 거래 기록 관리
- 매수/매도 거래 기록 추가/삭제
- 종목별 거래 요약 (총 매수/매도, 순 보유량)
- FIFO 방식으로 정확한 평균 단가 계산
- 매도 시 보유 수량 검증

### 💼 보유 종목 관리
- 거래 기록 기반 자동 계산
- 실시간 주가 및 손익 계산
- 수익률 표시

### 💰 배당금 관리
- 배당금 기록 추가/삭제
- 월별 배당금 집계 및 차트 시각화
- 배당금 이력 조회

### 🥧 포트폴리오 비중 분석
- 도넛 차트로 자산 배분 현황 시각화
- 종목별 비중 테이블
- 포트폴리오 분산 지수 계산

## 기술 스택

### Backend
- **Flask** - 웹 프레임워크
- **Flask-SQLAlchemy** - ORM
- **SQLite** - 데이터베이스
- **Requests** - HTTP 클라이언트
- **Python-dotenv** - 환경변수 관리

### Frontend
- **HTML5** - 마크업
- **Bootstrap 5** - UI 프레임워크
- **Chart.js** - 차트 라이브러리
- **Font Awesome** - 아이콘
- **Vanilla JavaScript** - 클라이언트 스크립트

### External APIs
- **Alpha Vantage** - 주가 데이터
- **IEX Cloud** - 대체 주가 데이터
- **Finnhub** - 대체 주가 데이터
- **Yahoo Finance** - 무료 주가 데이터 (폴백)

## 거래 기록 기반 관리 시스템

이 애플리케이션은 스프레드시트(Google Sheets 등)에서 관리하던 거래 내역을 수동으로 입력하여 정확한 보유 종목을 계산하는 방식을 사용합니다.

### 작동 방식
1. **거래 기록 입력**: `/trades` 페이지에서 매수/매도 기록을 추가
2. **자동 계산**: FIFO(선입선출) 방식으로 보유 종목과 평균 단가 자동 계산
3. **실시간 업데이트**: 거래 추가/삭제 시 보유 종목이 즉시 재계산
4. **검증 시스템**: 매도 시 보유 수량 부족 여부 자동 확인

### 데이터 구조
- **Trade 테이블**: 모든 매수/매도 거래 기록
  - `symbol`: 종목 심볼 (예: AAPL, TSLA)
  - `trade_type`: 'buy' 또는 'sell'
  - `quantity`: 거래 수량 (정수)
  - `price`: 거래 가격 (달러)
  - `trade_date`: 거래 일자
- **Holding 테이블**: 거래 기록으로부터 자동 계산된 현재 보유 종목

### 스프레드시트에서 이관하기
1. 스프레드시트의 각 거래 행을 `/trades` 페이지에서 입력
2. 거래일 순서대로 입력할 필요 없음 (시스템이 자동 정렬)
3. 모든 거래 입력 후 "보유종목 재계산" 버튼으로 검증 가능

## 설치 및 실행

### 1. 환경 변수 설정

다음 환경 변수들을 설정하세요 (선택사항):

```bash
# 주가 API 키 (최소 하나 설정 권장)
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key
IEX_CLOUD_API_KEY=your_iex_cloud_key
FINNHUB_API_KEY=your_finnhub_key

# 세션 보안 키
SESSION_SECRET=your_secret_key

# 데이터베이스 URL (기본값: SQLite)
DATABASE_URL=sqlite:///investment_tracker.db
