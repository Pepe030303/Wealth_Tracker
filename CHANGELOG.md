# 변경 로그 (Changelog)

이 프로젝트의 모든 주요 변경 사항은 이 파일에 기록됩니다.
이 형식은 [Keep a Changelog](https://keepachangelog.com/en/1.0.0/)을 따르며, 이 프로젝트는 [유의적 버전](https://semver.org/spec/v2.0.0.html)을 준수합니다.

## [v0.3.0] - 2025-07-12
### Added
- **서비스 계층 도입**: `services/portfolio_service.py`를 추가하여 포트폴리오 데이터 계산 비즈니스 로직을 중앙화하고 코드 중복을 제거했습니다.
- **파일 기반 캐싱**: 앱 시작 시 SEC에서 가져오는 전체 주식 목록을 `us_stocks.json` 파일에 캐싱하여, 외부 API 장애 시에도 안정적으로 앱이 시작되도록 구현했습니다.

### Changed
- **Redis 캐싱 시스템 강화**: `stock_api.py` 및 `utils.py`의 모든 외부 API(주가, 프로필, 배당) 호출에 Redis 캐시를 적용하여, 반복 조회 시 응답 속도를 극적으로 향상시켰습니다.
- **라우트 로직 단순화**: `routes.py`의 대시보드 및 배당금 관련 라우트가 새로운 서비스 계층을 호출하도록 리팩토링하여, 코드의 가독성과 유지보수성을 높였습니다.

### Fixed
- **성능 병목 해결**: 페이지 로드 시마다 발생하던 과도한 API 호출 문제를 Redis 캐싱 도입으로 해결했습니다.

---

## [v0.2.0] - 2025-07-12
### Added
- **전역 종목 검색 기능**: 네비게이션 바에 미국 주식 전체를 검색할 수 있는 자동완성 검색창을 추가했습니다. (`/api/search-stocks`)
- **종목 상세 페이지**: 검색한 종목의 상세 정보와 6개월 시세 차트를 보여주는 페이지를 추가했습니다. (`/stock/<symbol>`)
- **배당금 차트 데이터 라벨**: 월별 예상 배당금 막대그래프 위에 총액을 숫자로 표시하는 기능을 추가했습니다.
- **실제 배당금 내역 페이지**: `/dividends/history` 페이지를 추가하여 DB에 저장된 실제 배당금 입금 기록을 확인할 수 있도록 했습니다.

### Changed
- **배당금 차트 툴팁 개선**: 배당 비중 파이 차트의 툴팁에 종목명, 금액, 비중(%)이 함께 표시되도록 개선했습니다.
- **대시보드 섹터 그래프 UI 개선**: 트리맵 차트의 폰트 크기를 키우고, 툴팁에 해당 섹터의 상세 종목 리스트와 비중이 표시되도록 기능을 강화했습니다.
- **검색창 UI/UX 개선**: 데스크톱과 모바일 환경 모두에서 다른 UI 요소와 충돌하지 않도록 검색창의 위치와 반응형 동작을 수정했습니다.
- **대시보드 레이아웃 변경**: 주요 자산 정보를 개별 위젯 카드 형태로 분리하여 가독성을 높였습니다.

### Fixed
- **SCHD 등 ETF 배당금 누락 문제**: `yfinance` 데이터 조회 시 `yield` 값을 활용하는 폴백 로직을 추가하여, `dividendRate`가 없는 ETF의 배당 정보도 정확히 계산하도록 수정했습니다.
- **TLT 12월 특별배당 계산 오류**: 연간 실제 배당 횟수를 기준으로 월별 배당금을 계산하도록 로직을 변경하여, 한 달에 여러 번 배당하는 경우도 정확히 반영하도록 수정했습니다.
- **Jinja2 템플릿 필터 오류**: `dividends.html`에서 존재하지 않는 필터를 호출하던 오류를 수정했습니다. 복잡한 데이터 처리를 템플릿 대신 백엔드 라우트에서 수행하도록 로직을 변경하여 근본적으로 해결했습니다.
- **템플릿 주석 노출 문제**: 사용자 화면에 노출되던 파이썬 스타일 주석(`#`)을 템플릿 엔진이 처리하는 `{# ... #}` 주석으로 변경했습니다.

---

## [v0.1.0] - 2025-07-08
### Added
- **프로젝트 초기 설정**: Flask, SQLAlchemy, RQ 등 기본 구조 설정.
- **사용자 인증**: 회원가입, 로그인, 로그아웃 기능 구현.
- **거래 내역 기반 자산 관리**:
  - 매수/매도 거래 기록 추가 및 삭제 기능.
  - FIFO(선입선출) 방식에 따른 보유 종목 및 평균 단가 자동 계산 로직 구현.
- **기본 대시보드**: 총 자산, 수익률 등 기본 포트폴리오 요약 정보 표시.
- **기본 배당금 관리**: 예상 배당금 및 배당수익률 계산 기능.
- **프로덕션 배포 설정**: `render.yaml`을 통한 웹/워커/DB/Redis 서비스 배포 구성.
